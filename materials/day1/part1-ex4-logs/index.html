<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://opensciencegrid.org/user-school-2019/materials/day1/part1-ex4-logs/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Exercise 1.4 - OSG User School 2019</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/extra.css" rel="stylesheet">
    <link href="../../../css/codehilite.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Monday Exercise 1.4: Read and Interpret Log Files", url: "#_top", children: [
              {title: "Reading a Log File", url: "#reading-a-log-file" },
              {title: "Understanding When Job Log Events Are Written", url: "#understanding-when-job-log-events-are-written" },
              {title: "Understanding How HTCondor Writes Files", url: "#understanding-how-htcondor-writes-files" },
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <style type="text/css"> pre em { font-style: normal; background-color: yellow; } pre strong { font-style: normal; font-weight: bold; color: \#008; } </style>

<h1 id="monday-exercise-14-read-and-interpret-log-files">Monday Exercise 1.4: Read and Interpret Log Files<a class="headerlink" href="#monday-exercise-14-read-and-interpret-log-files" title="Permanent link">&para;</a></h1>
<p>The goal of this exercise is quite simple: 
Learn to understand the contents of a job log file, which is where HTCondor describes the steps 
taken to run your job.
When things go wrong with your job, the log is the best place to look for first pointers (in addition to the .err file).</p>
<p>This exercise is short, but you'll want to at least read over it before moving on (and come back later, if you can't run through it now).</p>
<h2 id="reading-a-log-file">Reading a Log File<a class="headerlink" href="#reading-a-log-file" title="Permanent link">&para;</a></h2>
<p>For this exercise, we can examine a log file for any previous job that you have run. The example output below is based on the <code>sleep 60</code> job.</p>
<p>A job log file is updated throughout the life of a job, usually at key events. Each event starts with a heading that indicates what happened and when. Here are <strong>all</strong> of the event headings from the <code>sleep</code> job log (detailed output in between headings has been omitted here):</p>
<div class="codehilite"><pre><span></span><span class="mi">000</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">20</span> <span class="n">Job</span> <span class="n">submitted</span> <span class="k">from</span> <span class="k">host</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">128</span><span class="p">.</span><span class="mi">104</span><span class="p">.</span><span class="mi">100</span><span class="p">.</span><span class="mi">43</span><span class="p">:</span><span class="mi">9618</span><span class="o">?</span><span class="n">addrs</span><span class="o">=</span><span class="p">...</span><span class="o">&gt;</span>
<span class="mi">001</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">11</span> <span class="n">Job</span> <span class="n">executing</span> <span class="k">on</span> <span class="k">host</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">128</span><span class="p">.</span><span class="mi">104</span><span class="p">.</span><span class="mi">55</span><span class="p">.</span><span class="mi">42</span><span class="p">:</span><span class="mi">9618</span><span class="o">?</span><span class="n">addrs</span><span class="o">=</span><span class="p">...</span><span class="o">&gt;</span>
<span class="mi">006</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">20</span> <span class="n">Image</span> <span class="k">size</span> <span class="k">of</span> <span class="n">job</span> <span class="n">updated</span><span class="p">:</span> <span class="mi">72</span>
<span class="mi">006</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">11</span> <span class="n">Image</span> <span class="k">size</span> <span class="k">of</span> <span class="n">job</span> <span class="n">updated</span><span class="p">:</span> <span class="mi">4072</span>
<span class="mi">005</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">46</span><span class="p">:</span><span class="mi">11</span> <span class="n">Job</span> <span class="n">terminated</span><span class="p">.</span>
</pre></div>


<p>There is a lot of extra information in those lines, but you can see:</p>
<ul>
<li>The job ID: cluster 5739, process 0 (written <code>000</code>)</li>
<li>The date and local time of each event</li>
<li>A brief description of the event: submission, execution, some information updates, and termination</li>
</ul>
<p>Some events provide no information in addition to the heading. For example:</p>
<div class="codehilite"><pre><span></span><span class="mi">000</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">44</span><span class="p">:</span><span class="mi">20</span> <span class="n">Job</span> <span class="n">submitted</span> <span class="k">from</span> <span class="k">host</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">128</span><span class="p">.</span><span class="mi">104</span><span class="p">.</span><span class="mi">100</span><span class="p">.</span><span class="mi">43</span><span class="p">:</span><span class="mi">9618</span><span class="o">?</span><span class="n">addrs</span><span class="o">=</span><span class="p">...</span><span class="o">&gt;</span>
<span class="p">...</span>
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span><span class="mi">001</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">11</span> <span class="n">Job</span> <span class="n">executing</span> <span class="k">on</span> <span class="k">host</span><span class="p">:</span> <span class="o">&lt;</span><span class="mi">128</span><span class="p">.</span><span class="mi">104</span><span class="p">.</span><span class="mi">55</span><span class="p">.</span><span class="mi">42</span><span class="p">:</span><span class="mi">9618</span><span class="o">?</span><span class="n">addrs</span><span class="o">=</span><span class="p">...</span><span class="o">&gt;</span>
<span class="p">...</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Each event ends with a line that contains only 3 dots: <code>...</code></p>
</div>
<p>But the periodic information update event contains some additional information:</p>
<div class="codehilite"><pre><span></span><span class="mi">006</span> <span class="p">(</span><span class="mi">5739</span><span class="p">.</span><span class="mi">000</span><span class="p">.</span><span class="mi">000</span><span class="p">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span><span class="p">:</span><span class="mi">45</span><span class="p">:</span><span class="mi">20</span> <span class="n">Image</span> <span class="k">size</span> <span class="k">of</span> <span class="n">job</span> <span class="n">updated</span><span class="p">:</span> <span class="mi">72</span>
    <span class="mi">1</span>  <span class="o">-</span>  <span class="n">MemoryUsage</span> <span class="k">of</span> <span class="n">job</span> <span class="p">(</span><span class="n">MB</span><span class="p">)</span>
    <span class="mi">72</span>  <span class="o">-</span>  <span class="n">ResidentSetSize</span> <span class="k">of</span> <span class="n">job</span> <span class="p">(</span><span class="n">KB</span><span class="p">)</span>
<span class="p">...</span>
</pre></div>


<p>These updates record the amount of memory that the job is using on the execute machine. This can be helpful information, so that in future runs of the job, you can tell HTCondor how much memory you will need.</p>
<p>The job termination event includes a great deal of additional information:</p>
<div class="codehilite"><pre><span></span><span class="mi">005</span> <span class="ss">(</span><span class="mi">5739</span>.<span class="mi">000</span>.<span class="mi">000</span><span class="ss">)</span> <span class="mi">07</span><span class="o">/</span><span class="mi">25</span> <span class="mi">10</span>:<span class="mi">46</span>:<span class="mi">11</span> <span class="nv">Job</span> <span class="nv">terminated</span>.
    <span class="ss">(</span><span class="mi">1</span><span class="ss">)</span> <span class="nv">Normal</span> <span class="nv">termination</span> <span class="ss">(</span><span class="k">return</span> <span class="nv">value</span> <span class="mi">0</span><span class="ss">)</span>
        <span class="nv">Usr</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>, <span class="nv">Sys</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>  <span class="o">-</span>  <span class="nv">Run</span> <span class="nv">Remote</span> <span class="nv">Usage</span>
        <span class="nv">Usr</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>, <span class="nv">Sys</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>  <span class="o">-</span>  <span class="nv">Run</span> <span class="nv">Local</span> <span class="nv">Usage</span>
        <span class="nv">Usr</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>, <span class="nv">Sys</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>  <span class="o">-</span>  <span class="nv">Total</span> <span class="nv">Remote</span> <span class="nv">Usage</span>
        <span class="nv">Usr</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>, <span class="nv">Sys</span> <span class="mi">0</span> <span class="mi">00</span>:<span class="mi">00</span>:<span class="mi">00</span>  <span class="o">-</span>  <span class="nv">Total</span> <span class="nv">Local</span> <span class="nv">Usage</span>
    <span class="mi">0</span>  <span class="o">-</span>  <span class="nv">Run</span> <span class="nv">Bytes</span> <span class="nv">Sent</span> <span class="nv">By</span> <span class="nv">Job</span>
    <span class="mi">27848</span>  <span class="o">-</span>  <span class="nv">Run</span> <span class="nv">Bytes</span> <span class="nv">Received</span> <span class="nv">By</span> <span class="nv">Job</span>
    <span class="mi">0</span>  <span class="o">-</span>  <span class="nv">Total</span> <span class="nv">Bytes</span> <span class="nv">Sent</span> <span class="nv">By</span> <span class="nv">Job</span>
    <span class="mi">27848</span>  <span class="o">-</span>  <span class="nv">Total</span> <span class="nv">Bytes</span> <span class="nv">Received</span> <span class="nv">By</span> <span class="nv">Job</span>
    <span class="nv">Partitionable</span> <span class="nv">Resources</span> :    <span class="nv">Usage</span>  <span class="nv">Request</span> <span class="nv">Allocated</span>
       <span class="nv">Cpus</span>                 :                 <span class="mi">1</span>         <span class="mi">1</span>
       <span class="nv">Disk</span> <span class="ss">(</span><span class="nv">KB</span><span class="ss">)</span>            :       <span class="mi">40</span>       <span class="mi">30</span>   <span class="mi">4203309</span>
       <span class="nv">Memory</span> <span class="ss">(</span><span class="nv">MB</span><span class="ss">)</span>          :        <span class="mi">1</span>        <span class="mi">1</span>         <span class="mi">1</span>
...
</pre></div>


<p>Probably the most interesting information is:</p>
<ul>
<li>The <code>return value</code> (<code>0</code> here, means the executable completed and didn't indicate any internal errors; non-zero usually means failure)</li>
<li>The total number of bytes transferred each way, which could be useful if your network is slow</li>
<li>The <code>Partitionable Resources</code> table, especially disk and memory usage, which will inform larger submissions.</li>
</ul>
<p>There are many other kinds of events, but the ones above will occur in almost every job log.</p>
<h2 id="understanding-when-job-log-events-are-written">Understanding When Job Log Events Are Written<a class="headerlink" href="#understanding-when-job-log-events-are-written" title="Permanent link">&para;</a></h2>
<p>When are events written to the job log file? Let’s find out. Read through the entire procedure below before starting, because some parts of the process are time sensitive.</p>
<ol>
<li>Change the <code>sleep</code> job submit file, so that the job sleeps for 2 minutes (= 120 seconds)</li>
<li>Submit the updated sleep job</li>
<li>As soon as the <code>condor_submit</code> command finishes, hit the return key a few times, to create some blank lines</li>
<li>
<p>Right away, run a command to show the log file and <strong>keep showing</strong> updates as they occur:</p>
<div class="codehilite"><pre><span></span><span class="gp">username@learn $</span> tail -f sleep.log
</pre></div>


</li>
<li>
<p>Watch the output carefully. When do events appear in the log file?</p>
</li>
<li>After the termination event appears, press Control-C to end the <code>tail</code> command and return to the shell prompt.</li>
</ol>
<h2 id="understanding-how-htcondor-writes-files">Understanding How HTCondor Writes Files<a class="headerlink" href="#understanding-how-htcondor-writes-files" title="Permanent link">&para;</a></h2>
<p>When HTCondor writes the output, error, and log files, does it erase the previous contents of the file or does it add new lines onto the end? Let’s find out!</p>
<p>For this exercise, we can use the <code>hostname</code> job from earlier.</p>
<ol>
<li>Edit the <code>hostname</code> submit file so that it uses new and unique filenames for output, error, and log files.<br />
Alternatively, delete any existing output, error, and log files from previous runs of the <code>hostname</code> job.</li>
<li>Submit the job three separate times in a row (there are better ways to do this, which we will cover in the next lecture)</li>
<li>Wait for all three jobs to finish</li>
<li>Examine the output file: How many hostnames are there? Did HTCondor erase the previous contents for each job, or add new lines?</li>
<li>Examine the log file… carefully: What happened there? Pay close attention to the times and job IDs of the events.</li>
</ol>
<p>If you have questions about how HTCondor handles these files, you could try finding relevant sections of the manual (this is hard and not as useful as one would hope), discuss it with neighbors or instructors, or ask questions at the end of this session.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../part1-ex5-request/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../part1-ex5-request/" class="btn btn-xs btn-link">
        Exercise 1.5
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../part1-ex3-jobs/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../part1-ex3-jobs/" class="btn btn-xs btn-link">
        Exercise 1.3
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>