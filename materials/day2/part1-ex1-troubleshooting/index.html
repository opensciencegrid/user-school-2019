<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <link rel="canonical" href="https://opensciencegrid.org/user-school-2019/materials/day2/part1-ex1-troubleshooting/">
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Exercise 1.1 - OSG User School 2019</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <link href="../../../css/extra.css" rel="stylesheet">
    <link href="../../../css/codehilite.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Tuesday Exercise 1.1: Troubleshooting Jobs", url: "#_top", children: [
              {title: "Acquiring the Materials", url: "#acquiring-the-materials" },
              {title: "Solving a Project Euler Problem", url: "#solving-a-project-euler-problem" },
              {title: "Answer Key", url: "#answer-key" },
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="tuesday-exercise-11-troubleshooting-jobs">Tuesday Exercise 1.1: Troubleshooting Jobs<a class="headerlink" href="#tuesday-exercise-11-troubleshooting-jobs" title="Permanent link">&para;</a></h1>
<p>The goal of this exercise is to troubleshoot some common problems that you may encounter when submitting jobs using HTCondor.
This exercise will likely take you longer than the allotted time;
don't fret, an answer key is available and office hours the rest of the week, so work at your own pace.</p>
<h2 id="acquiring-the-materials">Acquiring the Materials<a class="headerlink" href="#acquiring-the-materials" title="Permanent link">&para;</a></h2>
<p>The materials for this exercise are located on our web server.</p>
<ol>
<li>Log into <code>learn.chtc.wisc.edu</code></li>
<li>
<p>Use <code>wget</code> to retrieve the materials from the web server:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@learn $</span> wget http://proxy.chtc.wisc.edu/SQUID/osgschool19/tues-part1-ex1.tar.gz
</pre></div>


</li>
<li>
<p>Extract the tarball using the commands that you learned yesterday</p>
</li>
<li>Change into the directory extracted from the tarball and explore its contents</li>
</ol>
<h2 id="solving-a-project-euler-problem">Solving a Project Euler Problem<a class="headerlink" href="#solving-a-project-euler-problem" title="Permanent link">&para;</a></h2>
<p>The contents of the tarball that you've extracted contain a series of submit files, Python scripts, and an input file 
that are designed to solve <a href="https://projecteuler.net/problem=98">Project Euler problem 98</a>:</p>
<blockquote>
<p>By replacing each of the letters in the word CARE with 1, 2, 9, and 6 respectively, we form a square number: 1296 =
36^2. What is remarkable is that, by using the same digital substitutions, the anagram, RACE, also forms a square
number: 9216 = 96^2. We shall call CARE (and RACE) a square anagram word pair and specify further that leading zeroes
are not permitted, neither may a different letter have the same digital value as another letter.</p>
<p>Using p098_words.txt, a 16K text file containing nearly two-thousand common English words, find all the square
anagram word pairs (a palindromic word is NOT considered to be an anagram of itself).</p>
<p>What is the largest square number formed by any member of such a pair?</p>
<p><strong>NOTE:</strong> All anagrams formed must be contained in the given text file.</p>
</blockquote>
<p>Unfortunately, there are many issues with the submit files that you will have to work through before you can you can
obtain the solution to the problem!
The code in the Python scripts themselves should be bug-free.</p>
<h3 id="finding-anagrams">Finding anagrams<a class="headerlink" href="#finding-anagrams" title="Permanent link">&para;</a></h3>
<p>The first step in our workflow takes an input file with a list of words (<code>p098_words.txt</code>) and extracts all of the
anagrams using the <code>find_anagrams.py</code> script.
Naturally, we want to run this as an HTCondor job, so </p>
<ol>
<li>Submit the accompanying <code>find-anagrams.sub</code> file from the tarball.
   Try to do this step without looking at materials from yesterday.
   But if you are stuck, see <a href="../../day1/part1-ex3-jobs/">yesterdayâ€™s exercise 1.3</a>.</li>
<li>Resolve any issues that you encounter until the job returns pairs of anagrams as its output.</li>
</ol>
<p>Once you have satisfactory output, move onto the next section.</p>
<div class="admonition note">
<p class="admonition-title">Please be polite</p>
<p>Submit hosts are shared resources, so you should clean up after yourself.
After you're done troubleshooting held jobs, remove them with the following command:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@learn $</span> condor_rm -const <span class="s1">&#39;JobStatus =?= 5&#39;</span> &lt;JOB FILTER&gt;
</pre></div>


<table>
<thead>
<tr>
<th>Where replacing <code>&lt;JOB FILTER&gt;</code> with...</th>
<th>Will remove...</th>
</tr>
</thead>
<tbody>
<tr>
<td>Your username (e.g. <code>blin</code>)</td>
<td>All of your held jobs</td>
</tr>
<tr>
<td>A cluster ID (e.g. <code>74078</code>)</td>
<td>All held jobs matching the given cluster ID</td>
</tr>
<tr>
<td>A job ID (e.g. <code>97932.30</code>)</td>
<td>That specific held job</td>
</tr>
</tbody>
</table>
</div>
<h3 id="finding-the-largest-square">Finding the largest square<a class="headerlink" href="#finding-the-largest-square" title="Permanent link">&para;</a></h3>
<p>The next step of the workflow uses the <code>max_square.py</code> script to find the largest square number, if any, for a given
anagram word pair.
Let's submit jobs that runs <code>max_square.py</code> for all of the anagram word pairs (i.e. one job per word pair) that you
found in the previous section:</p>
<ol>
<li>Submit the accompanying <code>squares.sub</code> file from the tarball</li>
<li>Resolve any issues that you encounter until you receive output for each job.
   Note that some jobs may have empty output since not all anagram word pairs are <em>square</em> anagram word pairs.</li>
</ol>
<p>Next, you can find the largest square among your output by directly using the command line.
For example, if all of your job output has been placed in the <code>squares</code> directory and are named <code>square-1.out</code>,
<code>square-2.out</code>, etc. then you could run the following command to find the largest square:</p>
<div class="codehilite"><pre><span></span><span class="gp">user@learn $</span> cat squares/square-*.out <span class="p">|</span> sort -n <span class="p">|</span> tail - <span class="m">1</span>
</pre></div>


<p>You can check if you have the right answer with any of the OSG staff or by submitting the answer to Project Euler
(requires an account).</p>
<h2 id="answer-key">Answer Key<a class="headerlink" href="#answer-key" title="Permanent link">&para;</a></h2>
<p>There is also a working solution on our web server that can be retrieved with</p>
<div class="codehilite"><pre><span></span><span class="gp">user@learn $</span> wget http://proxy.chtc.wisc.edu/SQUID/osgschool19/tues-part1-ex1-key.tar.gz
</pre></div>


<p>It contains comments labeled <code>SOLUTION</code> that you can consult in case you get stuck.
Like any answer key, it's mainly useful as a verification tool, so try to only use it as a last resort or for detailed
explanations to improve your understanding.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="../part3-ex1-compiling/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="../part3-ex1-compiling/" class="btn btn-xs btn-link">
        Exercise 3.1
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="../../day1/part4-ex5-software-diffs/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="../../day1/part4-ex5-software-diffs/" class="btn btn-xs btn-link">
        Exercise 4.5
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>